# Starship configuration
# Inspired by Ayu Mirage color palette
# Colors: #707A8C (gray) / #5CCFE6 (cyan) / #73D0FF (blue) / #FFAD66 (orange) 
#         #87D96C (green) / #F27983 (red) / #F28779 (light red) / #DFBFFF (purple)

{% if yadm.class == "work" %}
# Work configuration - include hostname
format = """[╭─](bold green)\
$username[@](fg:#707A8C)$hostname$directory\
$git_branch$git_commit$git_state$git_status$hg_branch\
$docker_context$package$nodejs$python$rust$golang$java$kotlin$scala$swift\
$cmd_duration
"""
{% else %}
# Personal configuration - cleaner prompt
format = """[╭─](bold green)\
$directory\
$git_branch$git_commit$git_state$git_status$hg_branch\
$docker_context$package$nodejs$python$rust$golang$java$kotlin$scala$swift\
$cmd_duration
"""
{% endif %}

add_newline = true

# Username and hostname (work environment)
{% if yadm.class == "work" %}
[username]
show_always = true
style_user = "fg:#DFBFFF"
style_root = "fg:#F27983"
format = "[$user]($style)"

[hostname]
ssh_only = false
format = "[$hostname]($style)"
style = "fg:#DFBFFF"
{% endif %}

[directory]
style = "fg:#FFAD66"
read_only = " "
read_only_style = "fg:#707A8C"
format = "[$read_only]($read_only_style)[$path]($style) "
truncate_to_repo = true
truncation_length = 3
{% if yadm.class == "work" %}
truncation_length = 4
{% endif %}

[character]
error_symbol = '''[╰─\(*;-;\)](bold green) [❯](bold red)'''
success_symbol = '''[╰─\(*'-'\) ❯](bold green)'''
{% if yadm.class == "work" %}
vimcmd_symbol = '''[╰─\(*'o'\) ◀](bold cyan)'''
{% else %}
vimcmd_symbol = '''[╰─\(*'o'\) ](bold cyan)'''
{% endif %}

[git_branch]
format = "[$symbol$branch(:$remote_branch)]($style) "
symbol = " "  # nf-oct-git_branch
style = "fg:#5CCFE6"
truncation_length = 20
truncation_symbol = "…"

[git_commit]
commit_hash_length = 7
format = '[\($tag$hash\)]($style) '
only_detached = true
tag_disabled = false
tag_symbol = " "  # nf-oct-tag
style = "fg:#5CCFE6"

[git_state]
format = '[\($state( $progress_current/$progress_total)\) ]($style)'
style = "fg:#5CCFE6"
rebase = "REBASING"
merge = "MERGING"
revert = "REVERTING"
cherry_pick = "CHERRY-PICKING"
bisect = "BISECTING"
am = "AM"
am_or_rebase = "AM/REBASE"

[git_status]
format = '[\[$all_status$ahead_behind\] ]($style)'
style = "fg:#5CCFE6"
conflicted = "="
ahead = "⇡${count}"
behind = "⇣${count}"
diverged = "⇕⇡${ahead_count}⇣${behind_count}"
up_to_date = ""
untracked = "?${count}"
stashed = "$${count}"
modified = "!${count}"
staged = "+${count}"
renamed = "»${count}"
deleted = "✘${count}"

[cmd_duration]
min_time = 3_000
format = "[ $duration]($style) "
style = "fg:#F28779"
show_notifications = false

# Language/Tool modules with Ayu Mirage colors
[docker_context]
symbol = " "  # nf-linux-docker
style = "fg:#73D0FF"
format = '[$symbol $context]($style) '

[nodejs]
format = "[$symbol($version )]($style)"
symbol = " "
style = "fg:#87D96C"
detect_extensions = ["js", "mjs", "cjs", "ts", "mts", "cts"]

[python]
format = '[${symbol}${pyenv_prefix}(${version} )(\($virtualenv\) )]($style)'
symbol = " "
style = "fg:#73D0FF"

[rust]
format = "[$symbol($version )]($style)"
symbol = " "
style = "fg:#F28779"

[golang]
format = "[$symbol($version )]($style)"
symbol = " "
style = "fg:#5CCFE6"

[java]
format = "[$symbol($version )]($style)"
symbol = " "
style = "fg:#F28779"

[package]
format = "[$symbol$version]($style) "
symbol = "󰏗 "
style = "fg:#FFAD66"

# Additional modules
[memory_usage]
disabled = true
threshold = -1
format = "[$symbol ${ram_pct}]($style) "
symbol = "󰍛 "
style = "fg:#707A8C"

[time]
disabled = true
format = '[$time]($style) '
style = "fg:#707A8C"
time_format = "%R"