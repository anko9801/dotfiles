# =============================================================================
# dpp.vim plugins configuration
# =============================================================================

# =============================================================================
# Plugin Manager Core
# =============================================================================

[[plugins]]
repo = 'Shougo/dpp.vim'
rtp = ''

[[plugins]]
repo = 'Shougo/dpp-protocol-git'
rtp = ''

[[plugins]]
repo = 'Shougo/dpp-ext-lazy'
rtp = ''

[[plugins]]
repo = 'Shougo/dpp-ext-toml'
rtp = ''

[[plugins]]
repo = 'Shougo/dpp-ext-installer'
rtp = ''

[[plugins]]
repo = 'vim-denops/denops.vim'

# =============================================================================
# UI Enhancement
# =============================================================================

[[plugins]]
repo = 'vim-airline/vim-airline'
hook_add = '''
  let g:airline_theme = 'onedark'
  let g:airline#extensions#tabline#enabled = 1
  let g:airline#extensions#branch#enabled = 1
  let g:airline_powerline_fonts = 1
'''

[[plugins]]
repo = 'vim-airline/vim-airline-themes'
depends = ['vim-airline']

[[plugins]]
repo = 'cocopon/iceberg.vim'

[[plugins]]
repo = 'joshdick/onedark.vim'

[[plugins]]
repo = 'morhetz/gruvbox'

# =============================================================================
# File Management
# =============================================================================

[[plugins]]
repo = 'junegunn/fzf'
build = './install --bin'
merged = 0

[[plugins]]
repo = 'junegunn/fzf.vim'
depends = ['fzf']
on_cmd = ['Files', 'GFiles', 'Buffers', 'Rg', 'Lines', 'BLines', 'Commands']
hook_add = '''
  nnoremap <leader>f :Files<CR>
  nnoremap <leader>g :GFiles<CR>
  nnoremap <leader>b :Buffers<CR>
  nnoremap <leader>r :Rg<CR>
  nnoremap <leader>l :Lines<CR>
'''

[[plugins]]
repo = 'preservim/nerdtree'
on_cmd = ['NERDTree', 'NERDTreeToggle', 'NERDTreeFind']
hook_add = '''
  nnoremap <leader>n :NERDTreeToggle<CR>
  nnoremap <leader>nf :NERDTreeFind<CR>
  let g:NERDTreeShowHidden = 1
  let g:NERDTreeIgnore = ['\.git$', '\.DS_Store$']
'''

# =============================================================================
# Git Integration
# =============================================================================

[[plugins]]
repo = 'tpope/vim-fugitive'
on_cmd = ['Git', 'Gstatus', 'Gblame', 'Gdiff', 'Glog']

[[plugins]]
repo = 'airblade/vim-gitgutter'
hook_add = '''
  let g:gitgutter_map_keys = 0
  nmap ]h <Plug>(GitGutterNextHunk)
  nmap [h <Plug>(GitGutterPrevHunk)
  nmap <leader>hp <Plug>(GitGutterPreviewHunk)
  nmap <leader>hs <Plug>(GitGutterStageHunk)
  nmap <leader>hu <Plug>(GitGutterUndoHunk)
'''

# =============================================================================
# LSP & Completion
# =============================================================================

[[plugins]]
repo = 'prabirshrestha/vim-lsp'
hook_add = '''
  let g:lsp_diagnostics_enabled = 1
  let g:lsp_diagnostics_echo_cursor = 1
  let g:lsp_text_edit_enabled = 1
  let g:lsp_signs_enabled = 1
  let g:lsp_virtual_text_enabled = 1
'''

[[plugins]]
repo = 'mattn/vim-lsp-settings'
depends = ['vim-lsp']

[[plugins]]
repo = 'prabirshrestha/asyncomplete.vim'

[[plugins]]
repo = 'prabirshrestha/asyncomplete-lsp.vim'
depends = ['asyncomplete.vim', 'vim-lsp']

[[plugins]]
repo = 'hrsh7th/vim-vsnip'
hook_add = '''
  imap <expr> <C-j> vsnip#expandable() ? '<Plug>(vsnip-expand)' : '<C-j>'
  smap <expr> <C-j> vsnip#expandable() ? '<Plug>(vsnip-expand)' : '<C-j>'
  imap <expr> <Tab> vsnip#jumpable(1) ? '<Plug>(vsnip-jump-next)' : '<Tab>'
  smap <expr> <Tab> vsnip#jumpable(1) ? '<Plug>(vsnip-jump-next)' : '<Tab>'
  imap <expr> <S-Tab> vsnip#jumpable(-1) ? '<Plug>(vsnip-jump-prev)' : '<S-Tab>'
  smap <expr> <S-Tab> vsnip#jumpable(-1) ? '<Plug>(vsnip-jump-prev)' : '<S-Tab>'
'''

[[plugins]]
repo = 'hrsh7th/vim-vsnip-integ'
depends = ['vim-vsnip']

# =============================================================================
# Syntax & Language Support
# =============================================================================

[[plugins]]
repo = 'sheerun/vim-polyglot'

[[plugins]]
repo = 'dense-analysis/ale'
hook_add = '''
  let g:ale_linters_explicit = 1
  let g:ale_fix_on_save = 1
  let g:ale_sign_column_always = 1
  let g:ale_echo_msg_format = '[%linter%] %s [%severity%]'
  let g:ale_linters = {
  \   'python': ['flake8', 'mypy'],
  \   'javascript': ['eslint'],
  \   'typescript': ['eslint', 'tsserver'],
  \   'go': ['gopls', 'golint'],
  \   'rust': ['rustc', 'cargo'],
  \}
  let g:ale_fixers = {
  \   '*': ['remove_trailing_lines', 'trim_whitespace'],
  \   'python': ['black', 'isort'],
  \   'javascript': ['prettier'],
  \   'typescript': ['prettier'],
  \   'go': ['gofmt'],
  \   'rust': ['rustfmt'],
  \}
'''

# =============================================================================
# Editor Enhancement
# =============================================================================

[[plugins]]
repo = 'tpope/vim-surround'
on_event = ['InsertEnter']

[[plugins]]
repo = 'tpope/vim-commentary'
on_map = {n = 'gc', v = 'gc'}

[[plugins]]
repo = 'jiangmiao/auto-pairs'
on_event = ['InsertEnter']

[[plugins]]
repo = 'junegunn/vim-easy-align'
on_cmd = ['EasyAlign']
on_map = {n = 'ga', x = 'ga'}
hook_add = '''
  nmap ga <Plug>(EasyAlign)
  xmap ga <Plug>(EasyAlign)
'''

[[plugins]]
repo = 'easymotion/vim-easymotion'
on_map = {n = '<Leader>'}
hook_add = '''
  let g:EasyMotion_do_mapping = 0
  let g:EasyMotion_smartcase = 1
  nmap <Leader>s <Plug>(easymotion-overwin-f2)
  nmap <Leader>w <Plug>(easymotion-overwin-w)
'''

# =============================================================================
# Utility
# =============================================================================

[[plugins]]
repo = 'mbbill/undotree'
on_cmd = ['UndotreeToggle']
hook_add = '''
  nnoremap <leader>u :UndotreeToggle<CR>
'''

[[plugins]]
repo = 'vim-scripts/sudo.vim'
on_cmd = ['SudoRead', 'SudoWrite']

[[plugins]]
repo = 'tpope/vim-repeat'
on_event = ['CursorMoved']

[[plugins]]
repo = 'Shougo/vimproc.vim'
build = 'make'

[[plugins]]
repo = 'thinca/vim-quickrun'
on_cmd = ['QuickRun']
hook_add = '''
  nnoremap <leader>r :QuickRun<CR>
'''